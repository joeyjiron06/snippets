---
import { type CollectionEntry, getCollection } from 'astro:content'
import BlogPost from '../../layouts/BlogPost.astro'
import PreComponent from '../../components/PreComponent.astro'
import H1 from '~/components/H1.astro'
import H2 from '~/components/H2.astro'
import H3 from '~/components/H3.astro'
import H4 from '~/components/H4.astro'
import H5 from '~/components/H5.astro'
import H6 from '~/components/H6.astro'

export async function getStaticPaths() {
  const posts = await getCollection('blog')
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }))
}
type Props = CollectionEntry<'blog'>

const post = Astro.props
const { Content } = await post.render()
---

<BlogPost {...post.data}>
  <Content
    components={{
      pre: PreComponent,
      h1: H1,
      h2: H2,
      h3: H3,
      h4: H4,
      h5: H5,
      h6: H6,
    }}
  />
</BlogPost>
